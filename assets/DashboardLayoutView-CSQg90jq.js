import{A as y}from"./AppShell-CkeJqnKH.js";import{u as S}from"./widgetsStore-C986u6aU.js";import{u as _}from"./consumptionStore-ulWIeu2-.js";import{u as w}from"./housings-D9vp8K79.js";import{d as f,_ as q,c as k,w as v,r as d,o as p,a as h,b as a,e as m}from"./index-g7Qn_UOI.js";import{f as g}from"./fetchWithAuth-CvqqA0bk.js";const u=f("equipments",{state:()=>({equipments:[]}),persist:!0,actions:{async fetchEquipments(){try{const t=w(),o=await g(`http://localhost:3000/housings/${t.selectedHousingId}/equipments`,{method:"GET"});if(!o.ok){const n=await o.json();throw new Error(n.message||"Network response was not ok")}const e=await o.json();console.log("Equipments fetched successfully:",e.data),this.equipments=e.data.equipments||[]}catch(t){throw t}}}}),A=f("productions",{state:()=>({data:[]}),actions:{async fetchProductions(){this.data=[];const t=u(),o=new Date,e=new Date;e.setFullYear(o.getFullYear()),e.setMonth(0),e.setDate(1),e.setHours(0,0,0,0);try{const n=t.equipments.map(l=>g(`http://localhost:3000/energy-equipments/${l.id_equipment}/energy-productions?start=${e.toISOString()}&end=${o.toISOString()}`).then(async r=>{if(!r.ok){const c=await r.json();throw new Error(c.message||"Network response was not ok")}return(await r.json()).data.productions})),i=await Promise.all(n);this.data=i.flat()}catch(n){throw n}},async fetch2Year(){this.data={},u(),new Date().getFullYear()-1}},persist:{storage:sessionStorage,paths:["data"]}}),E={name:"DashboardLayoutView",components:{AppShell:y},data(){return{isReady:!1,equipmentsStore:u(),productionsStore:A(),widgetsStore:S(),housingsStore:w(),consumptionStore:_(),items:[{title:"My Dashboard",prependIcon:"mdi-view-dashboard-outline",to:{name:"Dashboard"},exact:!0},{title:"Monitoring",prependIcon:"mdi-monitor-dashboard",to:{name:"Monitoring"}},{title:"Forecasts",prependIcon:"mdi-chart-line",to:{name:"Forecasts"}},{title:"Reports",prependIcon:"mdi-file-document-outline",to:{name:"Reports"}},{title:"Resource Allocation",prependIcon:"mdi-account-cog-outline",to:{name:"Resource Allocation"}},{title:"Alerts & Notifications",prependIcon:"mdi-bell-outline",to:{name:"Alerts & Notifications"}}]}},methods:{async loadWidgets(){try{await this.widgetsStore.fetchUserWidgets(),await this.housingsStore.fetchHousings(),await this.equipmentsStore.fetchEquipments(),await this.productionsStore.fetchProductions(),await this.consumptionStore.fetchConsumption(),this.isReady=!0}catch(t){console.error("Erro ao carregar dados:",t)}}},created(){this.loadWidgets(),console.log("-----------------------created---------------------------------"),console.log(this.widgetsStore.userWidgets)}},I={key:0},b={key:1,class:"loading-container"},D={style:{width:"100%"},class:"d-flex justify-center w-100 gap-4"},x={style:{width:"100%"},class:"d-flex justify-center w-100 gap-4"};function R(t,o,e,n,i,l){const r=d("router-view"),s=d("v-skeleton-loader"),c=d("AppShell");return p(),k(c,{items:i.items,showSettings:!0},{default:v(()=>[i.isReady==!0?(p(),h("div",I,[a(r)])):(p(),h("div",b,[m("div",D,[a(s,{width:"33%",type:"card"}),a(s,{width:"33%",type:"card"}),a(s,{width:"33%",type:"card"})]),m("div",x,[a(s,{width:"33%",type:"card"}),a(s,{width:"33%",type:"card"})]),a(s,{type:"card"})]))]),_:1},8,["items"])}const C=q(E,[["render",R]]);export{C as default};
