import{d}from"./index-g7Qn_UOI.js";import{f as i}from"./fetchWithAuth-CvqqA0bk.js";import{u as c}from"./housings-D9vp8K79.js";const m=d("consumption",{state:()=>({data:{},lastUpdateDate:new Date}),actions:{async fetchConsumption(){this.data={};const a=c(),n=new Date,t=new Date;t.setFullYear(n.getFullYear()),t.setMonth(0),t.setDate(1),t.setHours(0,0,0,0);try{const s=await i(`http://localhost:3000/housings/${a.selectedHousingId}/energy-consumptions?start=${t.toISOString()}&end=${n.toISOString()}`,{method:"GET"});if(!s.ok){const o=await s.json();throw new Error(o.message||"Network response was not ok")}const r=await s.json();this.data=r.data.consumptions||[],this.data.forEach(o=>{o.value=parseFloat(o.value)})}catch(s){throw s}},async fetch2Year(){var o;this.data={};const a=c(),t=new Date().getFullYear()-1,s=new Date(t,0,1,0,0,0,0),r=new Date(t,11,31,23,59,59,999);try{const e=await i(`http://localhost:3000/housings/${a.selectedHousingId}/energy-consumptions?start=${s.toISOString()}&end=${r.toISOString()}`,{method:"GET"});if(!e.ok){const u=await e.json();throw new Error(u.message||"Network response was not ok")}const h=((o=(await e.json()).data)==null?void 0:o.consumptions)||[];this.data.push(...h)}catch(e){throw e}}},persist:{storage:sessionStorage,paths:["data"]}});export{m as u};
