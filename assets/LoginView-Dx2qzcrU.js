import{_ as S,z as k,v as T,a as h,e as d,b as r,c as u,y as _,w as o,r as n,A as L,B as P,F as V,o as a,p as w}from"./index-g7Qn_UOI.js";import{_ as C}from"./AuthFooter.vue_vue_type_style_index_0_lang-sEMKa_Ls.js";const E={name:"AuthLogin",data(){return{checkbox:!1,password:"passteste",username:"teste@email.com",show1:!1,isSubmitting:!1,emailRules:[s=>!!s.trim()||"E-mail is required",s=>{const e=s.trim();return!/\s/.test(e)||"E-mail must not contain spaces"},s=>/.+@.+\..+/.test(s.trim())||"E-mail must be valid"],passwordRules:[s=>!!s||"Password is required",s=>s===s.trim()||"Password cannot start or end with spaces",s=>s.length<=100||"Password must be equal or less than 100 characters"],forgotPassword:!1}},methods:{async validate(){this.isSubmitting=!0;const s=T(),e=k();try{const i=await fetch("http://localhost:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.username,password:this.password})}),m=await i.json();if(!i.ok)throw e.add({text:m.message||"Error processing login",color:"error",timeout:3e3}),new Error(m.message||"Error processing login");e.add({text:m.message||"Login successful",color:"success",timeout:3e3}),await s.setUser(m),this.$router.push("/")}catch(i){console.log(i)}finally{this.isSubmitting=!1}},switchToLogin(){this.forgotPassword=!this.forgotPassword,this.forgotPassword||(this.username="",this.password="")},switchToForgotPassword(){this.forgotPassword=!this.forgotPassword,this.forgotPassword&&(this.username="",this.password="")},async resetPassword(){this.isSubmitting=!0;const s=k();try{const i=await(await fetch("http://localhost:3000/auth/reset-password-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.username})})).json();if(!i.ok)throw s.add({text:i.message||"Error processing request",color:"error",timeout:3e3}),new Error(i.message||"Error processing request");s.add({color:"success",text:i.message||"Password reset link sent to your email"}),this.switchToLogin()}catch(e){console.error(e),s.add({text:"An unexpected error occurred.",color:"error",timeout:3e3})}finally{this.isSubmitting=!1}}}},A={class:"d-flex justify-space-between align-center bg-transparent"},F={key:0,class:"text-h3 text-center mb-0"},q={key:1,class:"text-h3 text-center mb-0"},B={class:"mb-6"},j={key:0},N={class:"d-flex align-center mt-4 mb-7 mb-sm-0"},R={class:"ml-auto"};function z(s,e,i,m,t,c){const g=n("router-link"),v=n("v-label"),b=n("v-text-field"),f=n("v-icon"),p=n("v-btn"),x=n("v-checkbox"),y=n("v-form");return a(),h(V,null,[d("div",A,[this.forgotPassword?(a(),h("h3",F," Reset Password ")):(a(),h("h3",q,"Login")),this.forgotPassword?_("",!0):(a(),u(g,{key:2,to:"/register",class:"text-primary text-decoration-none"},{default:o(()=>e[8]||(e[8]=[w("Don't Have an account?")])),_:1}))]),r(y,{onSubmit:e[6]||(e[6]=P(l=>t.forgotPassword?c.resetPassword:c.validate,["prevent"])),class:"mt-7 loginForm bg-transparent",onKeydown:e[7]||(e[7]=L(P(()=>{},["prevent"]),["enter"]))},{default:o(()=>[d("div",B,[r(v,null,{default:o(()=>e[9]||(e[9]=[w("Email Address")])),_:1}),r(b,{"aria-label":"email address",modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=l=>t.username=l),rules:t.emailRules,class:"mt-2",required:"","hide-details":"auto",variant:"outlined",color:"primary",autocomplete:"email"},null,8,["modelValue","rules"])]),this.forgotPassword?_("",!0):(a(),h("div",j,[r(v,null,{default:o(()=>e[10]||(e[10]=[w("Password")])),_:1}),r(b,{"aria-label":"password",modelValue:t.password,"onUpdate:modelValue":e[2]||(e[2]=l=>t.password=l),rules:t.passwordRules,required:"",variant:"outlined",color:"primary","hide-details":"auto",type:t.show1?"text":"password",class:"mt-2",autocomplete:"current-password"},{"append-inner":o(()=>[r(p,{color:"secondary",icon:"",rounded:"",variant:"text",onClick:e[1]||(e[1]=l=>t.show1=!t.show1)},{default:o(()=>[t.show1==!1?(a(),u(f,{key:0,size:"large",icon:"mdi-eye-outline"})):_("",!0),t.show1==!0?(a(),u(f,{key:1,size:"large",icon:"mdi-eye-off-outline"})):_("",!0)]),_:1})]),_:1},8,["modelValue","rules","type"])])),d("div",N,[this.forgotPassword?_("",!0):(a(),u(x,{key:0,modelValue:t.checkbox,"onUpdate:modelValue":e[3]||(e[3]=l=>t.checkbox=l),label:"Keep me sign in",required:"",class:"ms-n2","hide-details":""},null,8,["modelValue"])),d("div",R,[this.forgotPassword?(a(),h("p",{key:1,class:"text-darkText link-hover cursor-pointer forgotText",onClick:e[5]||(e[5]=(...l)=>c.switchToLogin&&c.switchToLogin(...l))}," Back to Login ")):(a(),h("p",{key:0,class:"text-darkText link-hover cursor-pointer forgotText",onClick:e[4]||(e[4]=(...l)=>c.switchToForgotPassword&&c.switchToForgotPassword(...l))}," Forgot Password? "))])]),this.forgotPassword?(a(),u(p,{key:2,color:"primary",loading:t.isSubmitting,block:"",class:"mt-4",variant:"flat",size:"large",onClick:c.resetPassword},{default:o(()=>e[12]||(e[12]=[w("Submit")])),_:1},8,["loading","onClick"])):(a(),u(p,{key:1,color:"primary",loading:t.isSubmitting,block:"",class:"mt-4",variant:"flat",size:"large",onClick:c.validate},{default:o(()=>e[11]||(e[11]=[w("Login")])),_:1},8,["loading","onClick"]))]),_:1})],64)}const U=S(E,[["render",z]]),O={name:"LoginView",components:{AuthLogin:U,AuthFooter:C},data(){return{logo:new URL("/assets/logo-DkSfxgr7.svg",import.meta.url).href}},methods:{},mounted(){}},K={class:"blur-logo"},D=["src"],J={class:"pt-6 pl-6"},M=["src"],H={class:"d-flex align-center justify-center",style:{"min-height":"calc(100vh - 148px)"}};function G(s,e,i,m,t,c){const g=n("v-col"),v=n("AuthLogin"),b=n("v-card-text"),f=n("v-card"),p=n("v-row"),x=n("v-container"),y=n("AuthFooter");return a(),u(p,{class:"bg-containerBg position-relative","no-gutters":""},{default:o(()=>[d("div",K,[d("img",{src:t.logo,alt:"logo",width:"512",height:"512"},null,8,D)]),r(g,{cols:"12"},{default:o(()=>[d("div",J,[d("img",{src:t.logo,alt:"logo",width:"48",height:"48"},null,8,M)])]),_:1}),r(g,{cols:"12",lg:"12",class:"d-flex align-center"},{default:o(()=>[r(x,null,{default:o(()=>[d("div",H,[r(p,{justify:"center"},{default:o(()=>[r(g,{cols:"12",md:"12"},{default:o(()=>[r(f,{elevation:"0",class:"loginBox"},{default:o(()=>[r(f,{elevation:"24",class:"bg-transparent border-md border-primary"},{default:o(()=>[r(b,{class:"pa-sm-10 pa-6"},{default:o(()=>[r(v)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),r(g,{cols:"12"},{default:o(()=>[r(x,{class:"pt-0 pb-6"},{default:o(()=>[r(y)]),_:1})]),_:1})]),_:1})}const W=S(O,[["render",G]]);export{W as default};
