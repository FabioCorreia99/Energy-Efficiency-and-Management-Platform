import{_ as N,C as U,m as G,v as T,c as a,w as t,r as n,o as l,b as s,y as u,D as z,B as h,E as w,e as _,p as y,q as S,G as I}from"./index-g7Qn_UOI.js";import{u as W}from"./widgetsStore-C986u6aU.js";const j={name:"AppShell",props:{items:{type:Array},showSettings:{type:Boolean,default:!0},showDrawer:{type:Boolean,default:!0}},data(){return{rail:!0,drawer:!0,isMobile:!1,authStore:T(),logo:new URL("/assets/logo-DkSfxgr7.svg",import.meta.url).href}},computed:{username(){return this.authStore.getUsername||""},isAdmin(){return this.authStore.isAdmin||!1},userInitials(){return this.username.split(" ").map(r=>r[0]).join("").toUpperCase()}},methods:{logout(){this.authStore.logout(),W().updateDBWidgets(),localStorage.clear(),sessionStorage.clear(),setTimeout(()=>{this.$router.push("/login")},100)}},created(){const{smAndDown:r}=U();this.isMobile=r.value,this.drawer=!this.isMobile,G(r,e=>{this.isMobile=e,e&&(this.drawer=!1)})}},q={class:"d-flex flex-row align-center ga-2"},E=["src"],R={class:"initialsText"},F={class:"text-center"};function H(r,e,i,J,o,c){const d=n("v-list"),p=n("v-list-item"),b=n("v-navigation-drawer"),k=n("v-app-bar-nav-icon"),v=n("v-app-bar-title"),g=n("router-link"),f=n("v-btn"),x=n("v-avatar"),D=n("v-divider"),M=n("v-menu"),A=n("v-app-bar"),C=n("v-container"),B=n("v-main"),V=n("v-layout"),L=n("v-app");return l(),a(L,null,{default:t(()=>[s(V,null,{default:t(()=>[i.showDrawer?(l(),a(b,{key:0,modelValue:o.drawer,"onUpdate:modelValue":e[1]||(e[1]=m=>o.drawer=m),permanent:!o.isMobile,temporary:o.isMobile,floating:!o.isMobile,rail:!o.isMobile&&o.rail,onClick:e[2]||(e[2]=m=>o.rail=!0)},z({append:t(()=>[i.showSettings?(l(),a(p,{key:0,class:"ma-2",link:"",to:{path:"/settings"},router:"",nav:"","prepend-icon":"mdi-cog-outline",title:"Settings"})):u("",!0)]),default:t(()=>[s(d,{density:"compact",mandatory:"","item-props":"",items:i.items,nav:""},null,8,["items"])]),_:2},[i.showDrawer?{name:"prepend",fn:t(()=>[o.isMobile?u("",!0):(l(),a(p,{key:0,onClick:e[0]||(e[0]=h(m=>o.rail=!o.rail,["stop"])),class:"ma-2",nav:"","prepend-icon":"mdi-menu"}))]),key:"0"}:void 0]),1032,["modelValue","permanent","temporary","floating","rail"])):u("",!0),s(A,{flat:""},{append:t(()=>[c.isAdmin&&i.showSettings?(l(),a(g,{key:0,to:"admin",style:w({textDecoration:"none",color:"inherit",marginLeft:i.showDrawer?"0":"32px"})},{default:t(()=>[s(v,null,{default:t(()=>e[6]||(e[6]=[y("Manage system")])),_:1})]),_:1},8,["style"])):u("",!0),s(f,{class:"mx-1",icon:"mdi-bell"}),s(f,{class:"text-none mr-4",height:"48",icon:"",slim:""},{default:t(()=>[s(x,{color:"surface-light",class:"profileAvatar",text:"",size:"small"},{default:t(()=>[_("span",R,S(c.userInitials),1)]),_:1}),s(M,{activator:"parent"},{default:t(()=>[s(d,{density:"compact",nav:""},{default:t(()=>[_("h3",F,S(c.username),1),s(D,{class:"my-2"}),i.showSettings?(l(),a(p,{key:0,"append-icon":"mdi-cog-outline",link:"",title:"Settings",to:{path:"/settings"},router:""})):u("",!0),s(p,{onClick:e[4]||(e[4]=m=>c.logout()),"append-icon":"mdi-logout",link:"",title:"Logout"})]),_:1})]),_:1})]),_:1})]),default:t(()=>[o.isMobile?(l(),a(k,{key:0,variant:"text",onClick:e[3]||(e[3]=h(m=>o.drawer=!o.drawer,["stop"]))})):u("",!0),s(g,{to:"/",style:w({textDecoration:"none",color:"inherit",marginLeft:i.showDrawer?"0":"32px"})},{default:t(()=>[_("div",q,[_("img",{src:o.logo,alt:"logo",width:"32",height:"32"},null,8,E),s(v,null,{default:t(()=>e[5]||(e[5]=[y("GreenGrid")])),_:1})])]),_:1},8,["style"])]),_:1}),s(B,null,{default:t(()=>[s(C,{fluid:"",class:"main-container"},{default:t(()=>[I(r.$slots,"default")]),_:3})]),_:3})]),_:3})]),_:3})}const P=N(j,[["render",H]]);export{P as A};
