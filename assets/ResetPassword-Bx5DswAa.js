import{_ as S}from"./AuthFooter.vue_vue_type_style_index_0_lang-sEMKa_Ls.js";import{_ as P,c as V,w as t,r as o,v as k,z as B,o as C,e as n,b as e,A as R,B as h,p as u}from"./index-g7Qn_UOI.js";const j={name:"LoginView",components:{AuthFooter:S},data(){return{logo:new URL("/assets/logo-DkSfxgr7.svg",import.meta.url).href,password:"",confirmPassword:"",passwordRules:[r=>!!r||"Password is required",r=>r===r.trim()||"Password cannot start or end with spaces",r=>r.length<=100||"Password must be equal or less than 100 characters"],isSubmitting:!1}},methods:{async validate(){this.isSubmitting=!0;const r=k(),s=B();if(this.password!==this.confirmPassword){this.isSubmitting=!1,s.add({text:"Passwords do not match",color:"error"});return}try{const l=await fetch("http://localhost:3000/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:this.password,token:this.$route.query.token||null})}),i=await l.json();if(!l.ok)throw s.add({text:i.message||"Error changing password",color:"error",timeout:3e3}),new Error(i.message||"Error changing password");s.add({text:i.message||"Password changed successfully",color:"success"}),await r.setUser(i),this.$router.push("/")}catch(l){console.log(l)}finally{this.isSubmitting=!1}}}},q={class:"blur-logo"},A=["src"],N={class:"pt-6 pl-6"},F=["src"],U={class:"d-flex align-center justify-center",style:{"min-height":"calc(100vh - 148px)"}},E={class:"mb-6"};function T(r,s,l,i,a,m){const d=o("v-col"),p=o("v-label"),_=o("v-text-field"),v=o("v-btn"),b=o("v-form"),x=o("v-card-text"),w=o("v-card"),f=o("v-row"),g=o("v-container"),y=o("AuthFooter");return C(),V(f,{class:"bg-containerBg position-relative","no-gutters":""},{default:t(()=>[n("div",q,[n("img",{src:a.logo,alt:"logo",width:"512",height:"512"},null,8,A)]),e(d,{cols:"12"},{default:t(()=>[n("div",N,[n("img",{src:a.logo,alt:"logo",width:"48",height:"48"},null,8,F)])]),_:1}),e(d,{cols:"12",lg:"12",class:"d-flex align-center"},{default:t(()=>[e(g,null,{default:t(()=>[n("div",U,[e(f,{justify:"center"},{default:t(()=>[e(d,{cols:"12",md:"12"},{default:t(()=>[e(w,{elevation:"0",class:"loginBox"},{default:t(()=>[e(w,{elevation:"24",class:"bg-transparent border-md border-primary"},{default:t(()=>[e(x,{class:"pa-sm-10 pa-6"},{default:t(()=>[s[6]||(s[6]=n("div",{class:"d-flex justify-space-between align-center bg-transparent"},[n("h3",{class:"text-h3 text-center mb-0"},"Reset Password")],-1)),e(b,{onSubmit:h(m.validate,["prevent"]),class:"mt-7 loginForm bg-transparent",onKeydown:s[2]||(s[2]=R(h(()=>{},["prevent"]),["enter"]))},{default:t(()=>[n("div",E,[e(p,null,{default:t(()=>s[3]||(s[3]=[u("New password")])),_:1}),e(_,{"aria-label":"new password",modelValue:a.password,"onUpdate:modelValue":s[0]||(s[0]=c=>a.password=c),rules:a.passwordRules,class:"mt-2",required:"",type:"password","hide-details":"auto",variant:"outlined",color:"primary",autocomplete:"newpassword"},null,8,["modelValue","rules"])]),n("div",null,[e(p,null,{default:t(()=>s[4]||(s[4]=[u("Confirm Password")])),_:1}),e(_,{"aria-label":"confirm password",modelValue:a.confirmPassword,"onUpdate:modelValue":s[1]||(s[1]=c=>a.confirmPassword=c),rules:a.passwordRules,required:"",variant:"outlined",color:"primary",type:"password","hide-details":"auto",class:"mt-2",autocomplete:"new-password"},null,8,["modelValue","rules"])]),e(v,{color:"primary",loading:a.isSubmitting,block:"",class:"mt-4",variant:"flat",size:"large",onClick:m.validate},{default:t(()=>s[5]||(s[5]=[u("Submit")])),_:1},8,["loading","onClick"])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(g,{class:"pt-0 pb-6"},{default:t(()=>[e(y)]),_:1})]),_:1})]),_:1})}const L=P(j,[["render",T]]);export{L as default};
