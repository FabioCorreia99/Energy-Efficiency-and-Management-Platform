import{_ as C,c as V,w as s,r as o,z as W,o as w,b as t,e as c,p,q as D}from"./index-g7Qn_UOI.js";import{u as b}from"./suppliers-DC_jdd6Q.js";import"./fetchWithAuth-CvqqA0bk.js";const E={data(){return{headers:[{title:"ID",key:"id"},{title:"ENTERPRISE",key:"enterprise"},{title:"COST_KWH",key:"cost_kWh"},{title:"ACTIONS",key:"actions",sortable:!1}],openDialog:!1,editingSupplier:null,form:{enterprise:"",cost_kWh:""},messagesStore:null,suppliersStore:null}},computed:{Suppliers(){return this.suppliersStore.suppliers}},methods:{editSupplier(i){this.editingSupplier=i,this.form.enterprise=i.enterprise,this.form.cost_kWh=i.cost_kWh,this.openDialog=!0},async deleteSupplier(i){try{await this.suppliersStore.deleteSupplier(i.id),this.messagesStore.add({color:"success",text:"Supplier deleted successfully!"})}catch(e){this.messagesStore.add({color:"error",text:e.message||"Error editing supplier"})}},async saveSupplier(){try{this.editingSupplier?(await this.suppliersStore.updateSupplier({id:this.editingSupplier.id,enterprise:this.form.enterprise,cost_kWh:this.form.cost_kWh}),this.messagesStore.add({color:"success",text:"Supplier updated successfully!"})):(await this.suppliersStore.addSupplier({enterprise:this.form.enterprise,cost_kWh:this.form.cost_kWh}),this.messagesStore.add({color:"success",text:"Supplier added successfully!"}))}catch(i){this.messagesStore.add({color:"error",text:i.message||"Error saving supplier"})}finally{this.closeDialog()}},closeDialog(){this.openDialog=!1,this.editingSupplier=null,this.form.enterprise="",this.form.cost_kWh=""}},mounted(){},async created(){this.messagesStore=W(),this.suppliersStore=b(),await this.suppliersStore.fetchSuppliers()}},N={class:"text-h6"};function T(i,e,q,A,r,n){const a=o("v-btn"),m=o("v-row"),d=o("v-icon"),_=o("v-data-table"),S=o("v-card-title"),u=o("v-text-field"),f=o("v-card-text"),v=o("v-spacer"),h=o("v-card-actions"),g=o("v-card"),k=o("v-dialog"),x=o("v-container");return w(),V(x,{class:"container"},{default:s(()=>[t(m,{justify:"space-between",align:"center",class:"mb-4"},{default:s(()=>[e[5]||(e[5]=c("h1",{class:"text-h5 pl-4"},"Suppliers Management",-1)),t(a,{color:"primary",onClick:e[0]||(e[0]=l=>r.openDialog=!0)},{default:s(()=>e[4]||(e[4]=[p("Add Supplier")])),_:1})]),_:1}),t(_,{headers:r.headers,items:n.Suppliers,"item-value":"id",class:"elevation-1 p-0"},{"item.actions":s(({item:l})=>[t(d,{small:"",class:"me-2",onClick:y=>n.editSupplier(l)},{default:s(()=>e[6]||(e[6]=[p("mdi-pencil")])),_:2},1032,["onClick"]),t(d,{small:"",color:"red",onClick:y=>n.deleteSupplier(l)},{default:s(()=>e[7]||(e[7]=[p("mdi-delete")])),_:2},1032,["onClick"])]),_:1},8,["headers","items"]),t(k,{modelValue:r.openDialog,"onUpdate:modelValue":e[3]||(e[3]=l=>r.openDialog=l),"max-width":"500px"},{default:s(()=>[t(g,null,{default:s(()=>[t(S,null,{default:s(()=>[c("span",N,D(r.editingSupplier?"Edit Supplier":"Add Supplier"),1)]),_:1}),t(f,null,{default:s(()=>[t(u,{modelValue:r.form.enterprise,"onUpdate:modelValue":e[1]||(e[1]=l=>r.form.enterprise=l),variant:"outlined",label:"Enteprise",required:""},null,8,["modelValue"]),t(u,{modelValue:r.form.cost_kWh,"onUpdate:modelValue":e[2]||(e[2]=l=>r.form.cost_kWh=l),variant:"outlined",label:"Cost_kWh",required:""},null,8,["modelValue"])]),_:1}),t(h,null,{default:s(()=>[t(v),t(a,{text:"",onClick:n.closeDialog},{default:s(()=>e[8]||(e[8]=[p("Cancel")])),_:1},8,["onClick"]),t(a,{color:"primary",onClick:n.saveSupplier},{default:s(()=>e[9]||(e[9]=[p("Save")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const M=C(E,[["render",T]]);export{M as default};
